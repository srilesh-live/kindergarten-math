/**
 * Tailwind CSS with Custom Components
 * Kindergarten Math Adventure - Dark Material Design
 */

@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Google Fonts - Nunito (dyslexia-friendly) */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap');

/* Base styles and CSS variables */
@layer base {
  :root {
    /* Color system */
    --color-primary: #1a1a2e;
    --color-secondary: #16213e;
    --color-surface: #1e1e30;
    --color-background: #0f0f23;
    
    /* Accent colors */
    --color-accent-purple: #9d4edd;
    --color-accent-blue: #5e60ce;
    --color-accent-teal: #4cc9f0;
    --color-accent-pink: #f72585;
    --color-accent-orange: #fb8500;
    --color-accent-green: #06ffa5;
    
    /* Pastel colors */
    --color-pastel-purple: #c77dff;
    --color-pastel-blue: #7b68ee;
    --color-pastel-cyan: #6dd5ed;
    --color-pastel-pink: #ff9a9e;
    --color-pastel-orange: #feca57;
    --color-pastel-green: #5fa8d3;
    
    /* Text colors */
    --color-text-primary: #e8eaed;
    --color-text-secondary: #bdc1c6;
    --color-text-muted: #9aa0a6;
    --color-text-accent: #c77dff;
    
    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.25);
    --shadow-xl: 0 16px 64px rgba(0, 0, 0, 0.3);
    
    /* Glows */
    --glow-purple: 0 0 20px rgba(157, 78, 221, 0.3);
    --glow-blue: 0 0 20px rgba(94, 96, 206, 0.3);
    --glow-teal: 0 0 20px rgba(76, 201, 240, 0.3);
    
    /* Animation durations */
    --duration-fast: 150ms;
    --duration-normal: 300ms;
    --duration-slow: 500ms;
    
    /* Easing functions */
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --ease-elastic: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    
    /* Border radius */
    --radius-sm: 8px;
    --radius-md: 16px;
    --radius-lg: 24px;
    --radius-xl: 32px;
    
    /* Spacing */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
  }
  
  * {
    @apply border-gray-200 border-opacity-20;
  }
  
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply font-primary bg-material-background text-text-primary min-h-screen;
    font-feature-settings: 'kern' 1, 'liga' 1;
    overflow-x: hidden;
  }
  
  /* Focus styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-accent-purple ring-offset-2 ring-offset-material-background;
  }
  
  /* Remove default button styles */
  button {
    @apply bg-transparent border-none outline-none cursor-pointer;
  }
  
  /* Smooth transitions for interactive elements */
  button, a, [role="button"] {
    @apply transition-all duration-normal ease-material;
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --color-text-primary: #ffffff;
      --color-text-secondary: #f0f0f0;
      --color-background: #000000;
      --color-surface: #1a1a1a;
    }
  }
  
  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Component layer for custom components */
@layer components {
  
  /* App layout components */
  .app-container {
    @apply min-h-screen bg-gradient-to-br from-material-primary to-material-secondary;
  }
  
  .screen {
    @apply hidden opacity-0 transform translate-y-4;
    transition: all var(--duration-normal) var(--ease-smooth);
  }
  
  .screen.active {
    @apply block opacity-100 transform translate-y-0;
  }
  
  /* Navigation components */
  .navbar {
    @apply sticky top-0 z-50 bg-material-primary bg-opacity-95 backdrop-blur-lg border-b border-white border-opacity-10;
  }
  
  .nav-content {
    @apply flex items-center justify-between max-w-7xl mx-auto px-4 py-3;
  }
  
  .nav-button {
    @apply touch-target flex items-center justify-center w-11 h-11 rounded-material bg-material-surface text-text-primary hover:bg-material-variant hover:text-accent-purple transition-all duration-normal;
  }
  
  /* Typography components */
  .heading-display {
    @apply text-4xl lg:text-5xl font-bold bg-gradient-to-r from-pastel-purple via-pastel-blue to-pastel-cyan bg-clip-text text-transparent;
  }
  
  .heading-large {
    @apply text-3xl font-bold text-text-primary;
  }
  
  .heading-medium {
    @apply text-2xl font-semibold text-text-primary;
  }
  
  .heading-small {
    @apply text-xl font-semibold text-text-primary;
  }
  
  .text-body {
    @apply text-base text-text-secondary leading-relaxed;
  }
  
  .text-caption {
    @apply text-sm text-text-muted;
  }
  
  /* Game components */
  .game-grid {
    @apply grid grid-cols-auto-fit-sm gap-6 p-6;
  }
  
  .game-icon {
    @apply text-5xl mb-4 animate-bounce-in;
  }
  
  .game-title {
    @apply heading-medium mb-2;
  }
  
  .game-description {
    @apply text-body mb-4;
  }
  
  /* Question and answer components */
  .question-container {
    @apply card p-8 text-center mb-6;
  }
  
  .question-text {
    @apply heading-large mb-6;
  }
  
  .question-visual {
    @apply flex items-center justify-center gap-4 mb-6 min-h-24;
  }
  
  .answer-grid {
    @apply grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6;
  }
  
  .answer-option {
    @apply touch-target btn btn-secondary text-lg font-semibold min-h-16 hover:scale-105 active:scale-95;
    
    &.selected {
      @apply bg-accent-purple text-white border-accent-purple;
    }
    
    &.correct {
      @apply bg-accent-green text-white border-accent-green animate-pulse-glow;
    }
    
    &.incorrect {
      @apply bg-accent-pink text-white border-accent-pink animate-wiggle;
    }
  }
  
  /* Visual math components */
  .math-visual {
    @apply flex items-center justify-center gap-4 flex-wrap;
  }
  
  .math-item {
    @apply w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold animate-bounce-in;
  }
  
  .math-operator {
    @apply text-3xl font-bold text-accent-purple mx-2;
  }
  
  /* Clock visual components */
  .clock-container {
    @apply relative w-48 h-48 mx-auto mb-6;
  }
  
  .clock-face {
    @apply w-full h-full rounded-full bg-gradient-to-br from-material-surface to-material-variant border-4 border-accent-blue relative;
  }
  
  .clock-hand {
    @apply absolute bg-accent-blue rounded-full;
    transform-origin: bottom center;
    left: 50%;
  }
  
  .clock-hand.hour {
    @apply w-1 h-16 -ml-0.5;
    top: 25%;
  }
  
  .clock-hand.minute {
    @apply w-0.5 h-20 -ml-px;
    top: 15%;
    @apply bg-pastel-blue;
  }
  
  .clock-number {
    @apply absolute text-sm font-semibold text-text-primary w-6 h-6 flex items-center justify-center;
  }
  
  /* Progress components */
  .progress-container {
    @apply mb-6 text-center;
  }
  
  .progress-bar {
    @apply w-full h-2 bg-material-variant rounded-full overflow-hidden mb-2;
  }
  
  .progress-fill {
    @apply h-full bg-gradient-to-r from-accent-purple to-accent-blue rounded-full transition-all duration-500 ease-out;
  }
  
  .progress-text {
    @apply text-caption;
  }
  
  /* Statistics components */
  .stats-grid {
    @apply grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6;
  }
  
  .stat-card {
    @apply card text-center p-4;
  }
  
  .stat-number {
    @apply text-2xl font-bold text-accent-purple mb-1;
  }
  
  .stat-label {
    @apply text-caption;
  }
  
  /* AI feedback components */
  .ai-panel {
    @apply card p-6 mb-6 border border-accent-purple bg-gradient-to-r from-material-surface to-material-variant;
  }
  
  .ai-avatar {
    @apply w-12 h-12 rounded-full bg-gradient-to-br from-accent-purple to-accent-blue flex items-center justify-center text-2xl mb-3;
  }
  
  .ai-message {
    @apply text-body leading-relaxed;
  }
  
  /* Achievement components */
  .achievement-badge {
    @apply inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-accent-green to-accent-teal text-white text-sm font-semibold animate-bounce-in;
  }
  
  .achievement-icon {
    @apply text-lg;
  }
  
  /* Loading components */
  .loading-screen {
    @apply fixed inset-0 bg-material-background flex items-center justify-center z-50;
  }
  
  .loading-content {
    @apply text-center p-8;
  }
  
  .loading-title {
    @apply heading-large mb-4 animate-fade-in;
  }
  
  .loading-subtitle {
    @apply text-body mb-6 animate-fade-in;
    animation-delay: 0.2s;
  }
  
  .loading-progress {
    @apply w-64 h-1 bg-material-variant rounded-full overflow-hidden;
  }
  
  .loading-bar {
    @apply h-full bg-gradient-to-r from-accent-purple to-accent-blue animate-pulse;
  }
  
  /* Modal components */
  .modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4;
  }
  
  .modal-content {
    @apply bg-material-surface rounded-material-lg max-w-md w-full max-h-screen overflow-y-auto animate-fade-in;
  }
  
  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-material-variant;
  }
  
  .modal-title {
    @apply heading-medium;
  }
  
  .modal-close {
    @apply nav-button text-text-muted hover:text-text-primary;
  }
  
  .modal-body {
    @apply p-6;
  }
  
  /* Settings components */
  .settings-group {
    @apply mb-6;
  }
  
  .settings-title {
    @apply heading-small mb-4;
  }
  
  .settings-item {
    @apply flex items-center justify-between mb-4;
  }
  
  .settings-label {
    @apply text-body;
  }
  
  .settings-control {
    @apply ml-4;
  }
  
  /* Toggle switch */
  .toggle-switch {
    @apply relative w-12 h-6 bg-material-variant rounded-full cursor-pointer transition-colors duration-200;
    
    &.checked {
      @apply bg-accent-purple;
    }
  }
  
  .toggle-thumb {
    @apply absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform duration-200;
    
    .toggle-switch.checked & {
      @apply transform translate-x-6;
    }
  }
  
  /* Form components */
  .form-input {
    @apply w-full px-4 py-3 bg-material-surface border border-material-variant rounded-material text-text-primary placeholder-text-muted focus:border-accent-purple focus:ring-1 focus:ring-accent-purple transition-colors duration-200;
  }
  
  .form-select {
    @apply form-input appearance-none cursor-pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }
  
  /* Offline indicator */
  .offline-banner {
    @apply fixed top-0 left-0 right-0 bg-gradient-to-r from-accent-orange to-accent-pink text-white text-center py-2 z-40 transform -translate-y-full transition-transform duration-300;
    
    &.show {
      @apply translate-y-0;
    }
  }
  
  /* Error states */
  .error-message {
    @apply text-accent-pink text-sm mt-1;
  }
  
  .error-boundary {
    @apply card p-8 text-center border border-accent-pink;
  }
  
  .error-icon {
    @apply text-4xl mb-4 text-accent-pink;
  }
  
  .error-title {
    @apply heading-medium mb-2 text-accent-pink;
  }
  
  .error-description {
    @apply text-body mb-4;
  }
  
  /* Success states */
  .success-message {
    @apply text-accent-green text-sm mt-1;
  }
}

/* Utility layer for custom utilities */
@layer utilities {
  
  /* Accessibility utilities */
  .sr-only-focusable:not(:focus):not(:focus-within) {
    @apply sr-only;
  }
  
  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-accent-purple focus:text-white focus:rounded-material;
  }
  
  /* Animation utilities */
  .animate-delay-100 {
    animation-delay: 0.1s;
  }
  
  .animate-delay-200 {
    animation-delay: 0.2s;
  }
  
  .animate-delay-300 {
    animation-delay: 0.3s;
  }
  
  /* Touch utilities */
  .touch-none {
    touch-action: none;
  }
  
  .touch-pan-x {
    touch-action: pan-x;
  }
  
  .touch-pan-y {
    touch-action: pan-y;
  }
  
  /* Gradient utilities */
  .gradient-primary {
    background: linear-gradient(135deg, var(--color-accent-purple), var(--color-accent-blue));
  }
  
  .gradient-secondary {
    background: linear-gradient(135deg, var(--color-accent-teal), var(--color-accent-green));
  }
  
  .gradient-accent {
    background: linear-gradient(135deg, var(--color-accent-pink), var(--color-accent-orange));
  }
  
  /* Glass morphism utilities */
  .glass {
    background: rgba(30, 30, 48, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  /* Debug utilities (only in development) */
  .debug-red {
    @apply border-2 border-red-500;
  }
  
  .debug-blue {
    @apply border-2 border-blue-500;
  }
  
  .debug-green {
    @apply border-2 border-green-500;
  }
}