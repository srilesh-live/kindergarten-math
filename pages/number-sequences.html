<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Number Sequences Practice - Kindergarten Math">
    <meta name="theme-color" content="#111827">
    
    <title>Number Sequences - Kindergarten Math</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'app-bg': '#0f172a',
                        'app-surface': '#1e293b',
                        'app-surface-light': '#334155',
                        'app-border': '#475569',
                        'app-text': '#f8fafc',
                        'app-text-muted': '#cbd5e1',
                        'app-text-dim': '#94a3b8'
                    },
                    fontFamily: {
                        'system': ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'sans-serif'],
                        'mono': ['SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Courier New', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <style>
        /* Remove number input arrows */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
    </style>
</head>
<body class="min-h-screen bg-app-bg text-app-text font-system antialiased">
    <!-- Header -->
    <header class="bg-app-surface border-b border-app-border px-4 py-3 flex items-center justify-between shadow-lg">
        <div class="flex items-center space-x-3">
            <button 
                onclick="window.location.href='home.html'" 
                class="p-2 rounded-lg hover:bg-app-surface-light text-app-text-muted hover:text-app-text transition-colors"
                title="Back to Home"
            >
                <i class="material-icons text-lg">home</i>
            </button>
            
            <div class="h-6 w-px bg-app-border"></div>
            
            <h1 class="text-xl font-semibold text-app-text">Number Sequences</h1>
        </div>
        
        <div class="flex items-center space-x-2">
            <!-- Timer -->
            <div class="flex items-center space-x-2 px-3 py-1 bg-app-bg rounded-lg border border-app-border">
                <i class="material-icons text-lg text-app-text-muted">timer</i>
                <span id="timer-display" class="text-xl font-mono text-app-text-muted min-w-[4rem]">00:00</span>
            </div>
            
            <!-- Play/Pause -->
            <button 
                id="play-pause-btn"
                class="p-2 rounded-lg hover:bg-app-surface-light text-app-text-muted hover:text-blue-400 transition-all"
                title="Play/Pause"
            >
                <i class="material-icons text-lg" id="play-pause-icon">pause</i>
            </button>
            
            <!-- Settings -->
            <button 
                id="settings-btn"
                class="p-2 rounded-lg hover:bg-app-surface-light text-app-text-muted hover:text-app-text transition-colors"
                title="Settings"
            >
                <i class="material-icons text-lg">settings</i>
            </button>
            
            <!-- Exit -->
            <button 
                id="exit-btn"
                class="p-2 rounded-lg hover:bg-app-surface-light text-app-text-muted hover:text-red-400 transition-all"
                title="Exit Practice"
            >
                <i class="material-icons text-lg">close</i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col items-center justify-center p-6">
        <!-- Sequence Display -->
        <div class="bg-app-surface border border-app-border rounded-3xl p-12 shadow-2xl mb-8 max-w-4xl w-full">
            <div class="text-center">
                <!-- Instructions -->
                <div class="mb-8">
                    <h2 class="text-2xl font-semibold text-app-text mb-2">Complete the Sequence</h2>
                </div>
                
                <!-- Sequence Numbers -->
                <div class="flex items-center justify-center flex-wrap gap-2 text-3xl md:text-4xl font-bold text-app-text mb-8">
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-1">1</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-2">2</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-3">3</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-4">4</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-5">5</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-6">6</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-7">7</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-8">8</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-9">9</div>
                    <div class="sequence-number bg-app-bg/50 border-2 border-app-border rounded-xl w-16 h-16 flex items-center justify-center" id="seq-10">10</div>
                </div>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="w-full max-w-md mb-4">
            <div class="flex items-center justify-between text-sm text-app-text-muted mb-2">
                <span>Progress</span>
                <span id="progress-text">1 of 10</span>
            </div>
            <div class="w-full bg-app-surface-light rounded-full h-2 border border-app-border">
                <div id="progress-bar" class="bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-500" style="width: 10%"></div>
            </div>
        </div>
        
        <!-- Score Display -->
        <div class="flex items-center space-x-6 text-sm">
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                <span class="text-app-text-muted">Correct: <span id="correct-count" class="text-green-400 font-semibold">0</span></span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                <span class="text-app-text-muted">Incorrect: <span id="incorrect-count" class="text-red-400 font-semibold">0</span></span>
            </div>
        </div>
    </main>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 opacity-0 invisible transition-all duration-300">
        <div class="bg-app-surface border border-app-border rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden transform scale-90 transition-all duration-300">
            <!-- Settings Header -->
            <div class="flex items-center justify-between p-6 border-b border-app-border">
                <h2 class="text-2xl font-semibold text-app-text">Settings</h2>
                <button 
                    id="settings-close-btn"
                    class="p-2 rounded-lg hover:bg-app-surface-light text-app-text-muted hover:text-app-text transition-colors"
                >
                    <i class="material-icons text-xl">close</i>
                </button>
            </div>
            
            <!-- Settings Body -->
            <div class="flex h-96">
                <!-- Left Navigation -->
                <div class="w-64 bg-app-bg border-r border-app-border p-4">
                    <nav class="space-y-1">
                        <button class="settings-nav-item active w-full flex items-center space-x-3 px-4 py-2 rounded-lg text-left transition-colors" data-section="general">
                            <i class="material-icons text-lg">tune</i>
                            <span>General</span>
                        </button>
                        <button class="settings-nav-item w-full flex items-center space-x-3 px-4 py-2 rounded-lg text-left transition-colors" data-section="difficulty">
                            <i class="material-icons text-lg">trending_up</i>
                            <span>Difficulty</span>
                        </button>
                        <button class="settings-nav-item w-full flex items-center space-x-3 px-4 py-2 rounded-lg text-left transition-colors" data-section="sequences">
                            <i class="material-icons text-lg">format_list_numbered</i>
                            <span>Sequences</span>
                        </button>
                    </nav>
                </div>
                
                <!-- Right Content -->
                <div class="flex-1 p-6 overflow-y-auto">
                    <!-- General Settings -->
                    <div id="general-section" class="settings-section">
                        <h3 class="text-xl font-semibold text-app-text mb-4">General Settings</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <label class="text-app-text font-medium">Sound Effects</label>
                                    <p class="text-sm text-app-text-muted">Play sounds for correct/incorrect answers</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-app-surface-light peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </label>
                            </div>
                            
                            <div>
                                <label class="block text-app-text font-medium mb-2">Number of Questions</label>
                                <input 
                                    type="number" 
                                    id="total-questions" 
                                    class="w-24 px-3 py-2 bg-app-bg border border-app-border rounded-lg text-app-text text-center focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500" 
                                    value="10" 
                                    min="5" 
                                    max="50"
                                >
                            </div>
                        </div>
                    </div>
                    
                    <!-- Difficulty Settings -->
                    <div id="difficulty-section" class="settings-section hidden">
                        <h3 class="text-xl font-semibold text-app-text mb-4">Difficulty</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-app-text font-medium mb-3">Starting Number Range</label>
                                <div class="flex items-center space-x-3">
                                    <input type="number" id="min-range" class="w-20 px-3 py-2 bg-app-bg border border-app-border rounded-lg text-app-text text-center focus:outline-none focus:ring-2 focus:ring-green-500" value="1" min="1" max="50">
                                    <span class="text-app-text-muted">to</span>
                                    <input type="number" id="max-range" class="w-20 px-3 py-2 bg-app-bg border border-app-border rounded-lg text-app-text text-center focus:outline-none focus:ring-2 focus:ring-green-500" value="20" min="1" max="100">
                                </div>
                                <p class="text-sm text-app-text-muted mt-2">Range for the first number in sequences</p>
                            </div>
                            
                            <div>
                                <label class="block text-app-text font-medium mb-3">Number Increase (Step)</label>
                                <div class="flex items-center space-x-3">
                                    <input type="number" id="min-step" class="w-20 px-3 py-2 bg-app-bg border border-app-border rounded-lg text-app-text text-center focus:outline-none focus:ring-2 focus:ring-green-500" value="1" min="1" max="10">
                                    <span class="text-app-text-muted">to</span>
                                    <input type="number" id="max-step" class="w-20 px-3 py-2 bg-app-bg border border-app-border rounded-lg text-app-text text-center focus:outline-none focus:ring-2 focus:ring-green-500" value="5" min="1" max="20">
                                </div>
                                <p class="text-sm text-app-text-muted mt-2">How much each number increases by</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sequence Types -->
                    <div id="sequences-section" class="settings-section hidden">
                        <h3 class="text-xl font-semibold text-app-text mb-4">Sequence Types</h3>
                        
                        <div class="space-y-4">
                            <div class="sequence-type-btn active bg-app-bg border-2 border-green-500 rounded-xl p-4 cursor-pointer transition-all hover:bg-green-500/10" data-type="counting">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-600/20 rounded-lg flex items-center justify-center">
                                        <i class="material-icons text-lg text-green-400">add</i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-green-400">Counting Up (+1)</h4>
                                        <p class="text-sm text-app-text-muted">Always increases by 1</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="sequence-type-btn bg-app-bg border-2 border-app-border rounded-xl p-4 cursor-pointer transition-all hover:bg-app-surface-light hover:text-app-text hover:border-app-text-muted" data-type="skip-counting">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600/20 rounded-lg flex items-center justify-center">
                                        <i class="material-icons text-lg text-blue-400">keyboard_double_arrow_up</i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-app-text-muted">Skip Counting</h4>
                                        <p class="text-sm text-app-text-muted">Uses your defined step range</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="sequence-type-btn bg-app-bg border-2 border-app-border rounded-xl p-4 cursor-pointer transition-all hover:bg-app-surface-light hover:text-app-text hover:border-app-text-muted" data-type="countdown">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-600/20 rounded-lg flex items-center justify-center">
                                        <i class="material-icons text-lg text-purple-400">remove</i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-app-text-muted">Counting Down (-1)</h4>
                                        <p class="text-sm text-app-text-muted">Always decreases by 1</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="sequence-type-btn bg-app-bg border-2 border-app-border rounded-xl p-4 cursor-pointer transition-all hover:bg-app-surface-light hover:text-app-text hover:border-app-text-muted" data-type="mixed">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-orange-600/20 rounded-lg flex items-center justify-center">
                                        <i class="material-icons text-lg text-orange-400">shuffle</i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-app-text-muted">Mixed Patterns</h4>
                                        <p class="text-sm text-app-text-muted">Random combination of all types</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Footer -->
            <div class="flex items-center justify-end space-x-3 p-6 border-t border-app-border">
                <button 
                    id="settings-cancel-btn"
                    class="px-6 py-2 text-app-text-muted hover:text-app-text transition-colors"
                >
                    Cancel
                </button>
                <button 
                    id="settings-save-btn"
                    class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors"
                >
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Exit Confirmation Modal -->
    <div id="exit-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 opacity-0 invisible transition-all duration-300">
        <div class="bg-app-surface border border-app-border rounded-2xl p-6 w-full max-w-md transform scale-90 transition-all duration-300">
            <div class="text-center">
                <div class="w-16 h-16 bg-red-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="material-icons text-2xl text-red-400">warning</i>
                </div>
                <h3 class="text-lg font-semibold text-app-text mb-2">Exit Practice?</h3>
                <p class="text-app-text-muted text-sm mb-6">Your current progress will be lost if you exit now.</p>
                <div class="flex space-x-3">
                    <button 
                        id="exit-cancel-btn"
                        class="flex-1 px-4 py-2 text-app-text-muted hover:text-app-text transition-colors"
                    >
                        Cancel
                    </button>
                    <button 
                        id="exit-confirm-btn"
                        class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors"
                    >
                        Exit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statistics-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 opacity-0 invisible transition-all duration-300">
        <div class="bg-app-surface border border-app-border rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden transform scale-90 transition-all duration-300">
            <!-- Statistics Header -->
            <div class="bg-gradient-to-r from-green-600/20 to-blue-600/20 border-b border-app-border p-6 text-center">
                <div class="w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="material-icons text-3xl text-yellow-400">emoji_events</i>
                </div>
                <h2 class="text-2xl font-bold text-app-text mb-2">Practice Complete!</h2>
                <p class="text-app-text-muted">Great pattern recognition! Here are your results:</p>
            </div>
            
            <!-- Statistics Body -->
            <div class="p-6 overflow-y-auto max-h-96">
                <!-- Overall Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-app-bg rounded-xl p-4 text-center">
                        <div class="text-2xl font-bold text-green-400 mb-1" id="stats-total">0</div>
                        <div class="text-sm text-app-text-muted">Total Sequences</div>
                    </div>
                    <div class="bg-app-bg rounded-xl p-4 text-center">
                        <div class="text-2xl font-bold text-blue-400 mb-1" id="stats-correct">0</div>
                        <div class="text-sm text-app-text-muted">Correct</div>
                    </div>
                    <div class="bg-app-bg rounded-xl p-4 text-center">
                        <div class="text-2xl font-bold text-red-400 mb-1" id="stats-incorrect">0</div>
                        <div class="text-sm text-app-text-muted">Incorrect</div>
                    </div>
                    <div class="bg-app-bg rounded-xl p-4 text-center">
                        <div class="text-2xl font-bold text-purple-400 mb-1" id="stats-accuracy">0%</div>
                        <div class="text-sm text-app-text-muted">Accuracy</div>
                    </div>
                </div>
                
                <!-- Time Stats -->
                <div class="bg-app-bg rounded-xl p-4 mb-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <i class="material-icons text-app-text-muted">timer</i>
                            <span class="text-app-text font-medium">Practice Time</span>
                        </div>
                        <span class="text-app-text-muted" id="stats-time">00:00</span>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="text-app-text-muted text-sm">Average per sequence</span>
                        <span class="text-app-text-muted text-sm" id="stats-avg-time">00:00</span>
                    </div>
                </div>
                
                <!-- Incorrect Answers Section -->
                <div id="incorrect-section" class="hidden">
                    <h3 class="text-lg font-semibold text-app-text mb-4 flex items-center space-x-2">
                        <i class="material-icons text-red-400">error_outline</i>
                        <span>Review Incorrect Sequences</span>
                    </h3>
                    <div id="incorrect-list" class="space-y-3">
                        <!-- Incorrect sequences will be populated here -->
                    </div>
                </div>
                
                <!-- Perfect Score Message -->
                <div id="perfect-score" class="hidden text-center py-6">
                    <div class="text-6xl mb-4">🎉</div>
                    <h3 class="text-xl font-bold text-green-400 mb-2">Perfect Pattern Master!</h3>
                    <p class="text-app-text-muted">You solved every sequence correctly! Amazing pattern recognition!</p>
                </div>
            </div>
            
            <!-- Statistics Footer -->
            <div class="border-t border-app-border p-6 bg-app-bg/50">
                <div class="flex space-x-3">
                    <button 
                        id="stats-practice-again"
                        class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors"
                    >
                        Practice Again
                    </button>
                    <button 
                        id="stats-home"
                        class="flex-1 px-6 py-3 bg-app-surface-light hover:bg-slate-600 text-app-text rounded-lg font-medium transition-colors"
                    >
                        Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/sequences.js"></script>
</body>
</html>