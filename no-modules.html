<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kindergarten Math Adventure - AI-powered learning games for children aged 3-6">
    <meta name="theme-color" content="#1a1a2e">
    <title>Kindergarten Math Adventure</title>
    
    <!-- Fonts and Base Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Inline Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'material': {
                            'primary': '#1a1a2e',
                            'secondary': '#16213e',
                            'surface': '#1e1e30',
                            'background': '#0f0f23',
                            'variant': '#252542'
                        },
                        'accent': {
                            'purple': '#9d4edd',
                            'blue': '#5e60ce', 
                            'teal': '#4cc9f0',
                            'pink': '#f72585',
                            'orange': '#fb8500',
                            'green': '#06ffa5'
                        },
                        'pastel': {
                            'purple': '#c77dff',
                            'blue': '#7b68ee',
                            'cyan': '#6dd5ed',
                            'pink': '#ff9a9e', 
                            'orange': '#feca57',
                            'green': '#5fa8d3'
                        },
                        'text': {
                            'primary': '#e8eaed',
                            'secondary': '#bdc1c6',
                            'muted': '#9aa0a6',
                            'accent': '#c77dff'
                        }
                    },
                    fontFamily: {
                        'primary': ['Nunito', 'ui-sans-serif', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    
    <!-- Critical CSS -->
    <style>
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .loading-content {
            text-align: center;
            color: #e8eaed;
        }
        
        /* App Container */
        .app-container {
            background: #0f0f23;
            min-height: 100vh;
        }
        
        /* Screen Management */
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            font-weight: 600;
            min-height: 44px;
            min-width: 44px;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: none;
            outline: none;
            text-decoration: none;
        }
        
        .btn:focus-visible {
            outline: 3px solid #9d4edd;
            outline-offset: 2px;
        }
        
        .btn-primary {
            background: #9d4edd;
            color: white;
        }
        
        .btn-primary:hover {
            background: #c77dff;
            transform: translateY(-2px);
        }
        
        .btn-primary:disabled {
            background: #252542;
            color: #9aa0a6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: #1e1e30;
            color: #e8eaed;
            border: 2px solid #252542;
        }
        
        .btn-secondary:hover {
            background: #252542;
            border-color: #9d4edd;
            transform: translateY(-2px);
        }
        
        .age-group-btn.selected {
            background: #9d4edd;
            color: white;
            border-color: #9d4edd;
            transform: scale(1.05);
        }
        
        /* Cards */
        .card {
            background: #1e1e30;
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
        }
        
        /* Game Cards */
        .game-card {
            background: linear-gradient(145deg, #1e1e30, #252542);
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .game-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #9d4edd, #5e60ce);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }
        
        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 16px 64px rgba(0, 0, 0, 0.3);
            border-color: #9d4edd;
        }
        
        .game-card:hover::before {
            opacity: 0.1;
        }
        
        /* Animations */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes bounce-in {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .animate-bounce {
            animation: bounce 1s infinite;
        }
        
        .animate-bounce-in {
            animation: bounce-in 0.6s ease-out;
        }
        
        /* Utilities */
        .hidden { display: none !important; }
    </style>
</head>
<body class="font-primary bg-material-background text-text-primary antialiased">
    <!-- Skip to main content link for screen readers -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 bg-accent-purple text-white p-2 rounded">Skip to main content</a>
    
    <!-- Offline banner -->
    <div id="offline-banner" class="hidden fixed top-0 left-0 right-0 bg-accent-orange text-white text-center py-2 z-50">
        <span>üåê You're offline - some features may be limited</span>
    </div>
    
    <!-- Loading screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="text-6xl mb-6 animate-bounce">üßÆ</div>
            <h1 class="text-3xl font-bold mb-4">Kindergarten Math Adventure</h1>
            <p class="text-lg mb-6">Preparing your magical learning journey...</p>
            <div class="w-48 h-2 bg-material-variant rounded-full mx-auto overflow-hidden">
                <div id="loading-bar" class="h-full bg-accent-purple rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- Main application container -->
    <div id="app" class="app-container hidden">
        <main id="main-content" class="min-h-screen">
            
            <!-- Welcome Screen -->
            <section id="welcome-screen" class="screen active">
                <div class="container mx-auto px-4 py-16 max-w-6xl">
                    <!-- Hero section -->
                    <div class="text-center mb-16">
                        <div class="text-8xl mb-8 animate-bounce-in">üåü</div>
                        <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-accent-purple to-accent-blue bg-clip-text text-transparent">
                            Welcome to Math Adventure!
                        </h2>
                        <p class="text-xl text-text-secondary max-w-3xl mx-auto mb-12 leading-relaxed">
                            Embark on a magical journey of numbers, shapes, and patterns. 
                            Our AI-powered games adapt to your learning style for the perfect challenge every time!
                        </p>
                        
                        <!-- Age group selection -->
                        <div class="mb-12">
                            <h3 class="text-2xl font-semibold mb-8 text-text-primary">How old are you?</h3>
                            <div class="flex justify-center gap-6 flex-wrap">
                                <button class="age-group-btn btn btn-secondary flex-col p-6 min-w-[120px]" data-age="3-4">
                                    <span class="text-4xl mb-3 block">üê£</span>
                                    <span class="text-base font-semibold">3-4 years</span>
                                </button>
                                <button class="age-group-btn btn btn-secondary flex-col p-6 min-w-[120px]" data-age="4-5">
                                    <span class="text-4xl mb-3 block">üå±</span>
                                    <span class="text-base font-semibold">4-5 years</span>
                                </button>
                                <button class="age-group-btn btn btn-secondary flex-col p-6 min-w-[120px]" data-age="5-6">
                                    <span class="text-4xl mb-3 block">üåü</span>
                                    <span class="text-base font-semibold">5-6 years</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Get started button -->
                        <button id="get-started-btn" class="btn btn-primary text-xl py-4 px-8" disabled>
                            Let's Start Learning! üöÄ
                        </button>
                    </div>
                    
                    <!-- Features overview -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        <div class="card text-center">
                            <div class="text-5xl mb-4">üß†</div>
                            <h3 class="text-xl font-semibold mb-3 text-text-primary">Smart Learning</h3>
                            <p class="text-text-secondary">AI adapts to your pace and helps you learn better</p>
                        </div>
                        <div class="card text-center">
                            <div class="text-5xl mb-4">üéÆ</div>
                            <h3 class="text-xl font-semibold mb-3 text-text-primary">Fun Games</h3>
                            <p class="text-text-secondary">Learn through play with colorful, engaging activities</p>
                        </div>
                        <div class="card text-center">
                            <div class="text-5xl mb-4">üìä</div>
                            <h3 class="text-xl font-semibold mb-3 text-text-primary">Track Progress</h3>
                            <p class="text-text-secondary">See your improvement and celebrate achievements</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Selection Screen -->
            <section id="game-selection-screen" class="screen">
                <div class="container mx-auto px-4 py-16 max-w-6xl">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold mb-6 text-text-primary">Choose Your Adventure!</h2>
                        <p class="text-xl text-text-secondary">Pick a game to start your learning journey</p>
                    </div>
                    
                    <!-- Available games -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        <div class="game-card">
                            <div class="text-6xl mb-4">üßÆ</div>
                            <h3 class="text-2xl font-bold mb-3 text-text-primary">Number Magic</h3>
                            <p class="text-text-secondary mb-6">Master numbers through magical adventures!</p>
                            <button class="btn btn-primary w-full" onclick="startNumberMagic()">
                                üöÄ Play Now
                            </button>
                        </div>
                        
                        <div class="game-card opacity-50">
                            <div class="text-6xl mb-4">üïê</div>
                            <h3 class="text-2xl font-bold mb-3 text-text-muted">Time Wizard</h3>
                            <p class="text-text-muted mb-6">Learn to read clocks like a time wizard!</p>
                            <button class="btn btn-secondary w-full" disabled>
                                üîí Coming Soon
                            </button>
                        </div>
                        
                        <div class="game-card opacity-50">
                            <div class="text-6xl mb-4">üîÆ</div>
                            <h3 class="text-2xl font-bold mb-3 text-text-muted">Pattern Quest</h3>
                            <p class="text-text-muted mb-6">Discover magical patterns and sequences!</p>
                            <button class="btn btn-secondary w-full" disabled>
                                üîí Coming Soon
                            </button>
                        </div>
                    </div>
                    
                    <!-- Back button -->
                    <div class="text-center mt-12">
                        <button class="btn btn-secondary" onclick="goToWelcome()">
                            ‚Üê Back to Welcome
                        </button>
                    </div>
                </div>
            </section>

            <!-- Demo Game Screen -->
            <section id="demo-game-screen" class="screen">
                <div class="container mx-auto px-4 py-16 max-w-4xl text-center">
                    <h2 class="text-4xl font-bold mb-6 text-text-primary">üßÆ Number Magic Demo</h2>
                    <div class="card max-w-2xl mx-auto">
                        <div class="text-6xl mb-6">üéâ</div>
                        <h3 class="text-2xl font-semibold mb-4 text-text-primary">Interface Working!</h3>
                        <p class="text-text-secondary mb-6">
                            Great! The interface is loading properly. This confirms the basic framework is functional.
                        </p>
                        <p class="text-text-muted mb-8">
                            The full Number Magic game with AI learning, adaptive difficulty, and visual math representations 
                            is ready in the main application. We're currently debugging the module loading system.
                        </p>
                        <div class="space-y-4">
                            <button class="btn btn-primary" onclick="goToGameSelection()">
                                üéÆ Back to Games
                            </button>
                            <br>
                            <button class="btn btn-secondary" onclick="tryMainApp()">
                                üîß Try Main App
                            </button>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- JavaScript -->
    <script>
        console.log('üßÆ Kindergarten Math Adventure - No Modules Version');
        
        let selectedAge = null;
        let currentScreen = 'welcome';
        
        // Initialize app
        function initApp() {
            console.log('üîß Initializing simplified app...');
            
            // Simulate loading
            let progress = 0;
            const loadingBar = document.getElementById('loading-bar');
            
            const updateProgress = () => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                if (loadingBar) {
                    loadingBar.style.width = progress + '%';
                }
                
                if (progress < 100) {
                    setTimeout(updateProgress, 100 + Math.random() * 200);
                } else {
                    setTimeout(showApp, 500);
                }
            };
            
            setTimeout(updateProgress, 300);
        }
        
        // Show main app
        function showApp() {
            console.log('‚úÖ Showing app interface');
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            
            setupEventListeners();
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Age group buttons
            document.querySelectorAll('.age-group-btn').forEach(btn => {
                btn.addEventListener('click', () => selectAge(btn.dataset.age, btn));
            });
            
            // Get started button
            document.getElementById('get-started-btn').addEventListener('click', goToGameSelection);
        }
        
        // Handle age selection
        function selectAge(age, button) {
            console.log('Age selected:', age);
            selectedAge = age;
            
            // Update visual selection
            document.querySelectorAll('.age-group-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            
            // Enable get started button
            const startBtn = document.getElementById('get-started-btn');
            startBtn.disabled = false;
        }
        
        // Screen navigation functions
        function showScreen(screenName) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const targetScreen = document.getElementById(screenName + '-screen');
            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenName;
            }
        }
        
        function goToWelcome() {
            showScreen('welcome');
        }
        
        function goToGameSelection() {
            if (!selectedAge) {
                alert('Please select your age first!');
                goToWelcome();
                return;
            }
            showScreen('game-selection');
        }
        
        function startNumberMagic() {
            showScreen('demo-game');
        }
        
        function tryMainApp() {
            window.location.href = './';
        }
        
        // Network status simulation
        function updateNetworkStatus() {
            const isOnline = navigator.onLine;
            const banner = document.getElementById('offline-banner');
            
            if (!isOnline && banner) {
                banner.classList.remove('hidden');
            } else if (banner) {
                banner.classList.add('hidden');
            }
        }
        
        // Event listeners
        window.addEventListener('online', updateNetworkStatus);
        window.addEventListener('offline', updateNetworkStatus);
        
        // Start initialization
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Fallback if DOMContentLoaded already fired
        if (document.readyState === 'loading') {
            console.log('Document loading...');
        } else {
            console.log('Document ready - initializing immediately');
            initApp();
        }
    </script>
</body>
</html>