<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test - Kindergarten Math</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0f0f23;
            color: #e8eaed;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        .success { color: #06ffa5; }
        .error { color: #f72585; }
        .loading { color: #fb8500; }
    </style>
</head>
<body>
    <h1>üßÆ Kindergarten Math - Simple Test</h1>
    
    <div class="test-section">
        <h2>1. Basic Page Load</h2>
        <div id="basic-test" class="loading">‚è≥ Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>2. CSS Files</h2>
        <div id="css-test" class="loading">‚è≥ Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>3. Module Support</h2>
        <div id="module-test" class="loading">‚è≥ Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>4. Config Import</h2>
        <div id="config-test" class="loading">‚è≥ Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>5. All Modules</h2>
        <div id="all-modules-test" class="loading">‚è≥ Testing...</div>
    </div>

    <div class="test-section">
        <h2>6. Manual App Start</h2>
        <button onclick="startManualTest()" style="padding: 10px 20px; background: #9d4edd; color: white; border: none; border-radius: 8px; cursor: pointer;">
            üöÄ Try Manual Start
        </button>
        <div id="manual-test"></div>
    </div>

    <script>
        console.log('üß™ Simple test page loading...');
        
        // Test 1: Basic functionality
        document.getElementById('basic-test').innerHTML = '<span class="success">‚úÖ Page loaded successfully</span>';
        
        // Test 2: Check CSS file accessibility
        fetch('./src/styles/main.css')
            .then(response => {
                if (response.ok) {
                    document.getElementById('css-test').innerHTML = '<span class="success">‚úÖ CSS file accessible</span>';
                } else {
                    document.getElementById('css-test').innerHTML = '<span class="error">‚ùå CSS file not found (404)</span>';
                }
            })
            .catch(error => {
                document.getElementById('css-test').innerHTML = '<span class="error">‚ùå CSS file error: ' + error.message + '</span>';
            });
        
        // Test 3: Module support
        try {
            new Function('import("")');
            document.getElementById('module-test').innerHTML = '<span class="success">‚úÖ ES6 modules supported</span>';
        } catch (e) {
            document.getElementById('module-test').innerHTML = '<span class="error">‚ùå ES6 modules not supported</span>';
        }
        
        // Test 4: Try config import
        import('./src/js/config.js')
            .then(config => {
                console.log('Config loaded:', config);
                if (config.APP_CONFIG && config.APP_CONFIG.GAMES) {
                    document.getElementById('config-test').innerHTML = '<span class="success">‚úÖ Config loaded with ' + Object.keys(config.APP_CONFIG.GAMES).length + ' games</span>';
                } else {
                    document.getElementById('config-test').innerHTML = '<span class="error">‚ùå Config missing GAMES</span>';
                }
            })
            .catch(error => {
                console.error('Config error:', error);
                document.getElementById('config-test').innerHTML = '<span class="error">‚ùå Config failed: ' + error.message + '</span>';
            });
        
        // Test 5: Try all module imports
        Promise.all([
            import('./src/js/config.js'),
            import('./src/js/userManager.js'),
            import('./src/js/aiLearningEngine.js'),
            import('./src/js/gameManager.js'),
            import('./src/js/games/BaseGame.js'),
            import('./src/js/games/NumberMagicGame.js')
        ])
        .then(modules => {
            console.log('All modules loaded:', modules);
            document.getElementById('all-modules-test').innerHTML = '<span class="success">‚úÖ All 6 modules loaded successfully</span>';
        })
        .catch(error => {
            console.error('Module loading error:', error);
            document.getElementById('all-modules-test').innerHTML = '<span class="error">‚ùå Module error: ' + error.message + '</span>';
        });
        
        // Manual test function
        window.startManualTest = async function() {
            const resultDiv = document.getElementById('manual-test');
            resultDiv.innerHTML = '<p class="loading">üîÑ Starting manual app initialization...</p>';
            
            try {
                // Load app module
                const appModule = await import('./src/js/app.js');
                resultDiv.innerHTML += '<p class="success">‚úÖ App module loaded</p>';
                
                // Check if app instance exists
                if (window.app) {
                    resultDiv.innerHTML += '<p class="success">‚úÖ App instance found</p>';
                    
                    // Try to force show the main page
                    const loadingScreen = document.getElementById('loading-screen');
                    const mainApp = document.getElementById('app');
                    
                    if (loadingScreen) {
                        loadingScreen.style.display = 'none';
                        resultDiv.innerHTML += '<p class="success">‚úÖ Loading screen hidden</p>';
                    }
                    
                    if (mainApp) {
                        mainApp.style.display = 'block';
                        resultDiv.innerHTML += '<p class="success">‚úÖ Main app shown</p>';
                        
                        // Redirect to main page
                        setTimeout(() => {
                            window.location.href = './';
                        }, 2000);
                        
                        resultDiv.innerHTML += '<p class="success">üéâ Redirecting to main app...</p>';
                    }
                } else {
                    resultDiv.innerHTML += '<p class="error">‚ùå App instance not found</p>';
                }
                
            } catch (error) {
                console.error('Manual test error:', error);
                resultDiv.innerHTML += '<p class="error">‚ùå Manual test failed: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>